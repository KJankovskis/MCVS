-- MySQL Script generated by MySQL Workbench
-- 10/23/15 21:40:57
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mcvs_db
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mcvs_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mcvs_db` DEFAULT CHARACTER SET utf8 COLLATE utf8_latvian_ci ;
USE `mcvs_db` ;

-- -----------------------------------------------------
-- Table `mcvs_db`.`Persona`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`Persona` (
  `idPersona` INT NOT NULL AUTO_INCREMENT,
  `vards` VARCHAR(25) NOT NULL,
  `uzvards` VARCHAR(25) NOT NULL,
  `epasts` VARCHAR(70) NOT NULL,
  `talrunis` VARCHAR(15) NOT NULL,
  `personasKods` VARCHAR(12) NOT NULL,
  `dzivesAdrese` VARCHAR(70) NOT NULL,
  `dzivesPilseta` VARCHAR(20) NOT NULL,
  `darbaAdrese` VARCHAR(70) NOT NULL,
  `darbaPilseta` VARCHAR(20) NOT NULL,
  `foto` LONGBLOB NULL,
  `lietotajaLoma` VARCHAR(1) NOT NULL,
  `lietotajvards` VARCHAR(20) NOT NULL,
  `parole` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`idPersona`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`PersonaApgutais`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`PersonaApgutais` (
  `idPersonaApgutais` INT NOT NULL AUTO_INCREMENT,
  `Persona_idPersona` INT NOT NULL,
  `SertifikatsDiplomsKurss` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`idPersonaApgutais`, `Persona_idPersona`),
  INDEX `fk_PersonaApgutais_Persona_idx` (`Persona_idPersona` ASC),
  CONSTRAINT `fk_PersonaApgutais_Persona`
    FOREIGN KEY (`Persona_idPersona`)
    REFERENCES `mydb`.`Persona` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`Kurss`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`Kurss` (
  `idKurss` INT NOT NULL AUTO_INCREMENT,
  `kursaKods` VARCHAR(10) NOT NULL,
  `kKursaNosaukums` VARCHAR(50) NOT NULL,
  `kursaApraksts` VARCHAR(300) NOT NULL,
  `nepieciesamaisAuditorijasTips` VARCHAR(1) NOT NULL,
  `kMaksimalaisStudentuSkaits` INT NOT NULL,
  `kursaIlgums` INT NOT NULL,
  `kursaDiplomaDokuments` LONGBLOB NULL,
  `kursaProgrammaDokuments` LONGBLOB NULL,
  `kursaMacibuMaterialsDokuments` LONGBLOB NULL,
  PRIMARY KEY (`idKurss`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`Auditorija`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`Auditorija` (
  `idAuditorija` INT NOT NULL AUTO_INCREMENT,
  `aNumurs` INT NULL,
  `aNosaukums` VARCHAR(50) NULL,
  `aAdrese` VARCHAR(70) NOT NULL,
  `aPilseta` VARCHAR(20) NOT NULL,
  `aMaksimalaisStudentuSkaits` INT NOT NULL,
  `tafele` TINYINT(1) NOT NULL,
  `projektors` TINYINT(1) NOT NULL,
  `videoKonference` TINYINT(1) NOT NULL,
  PRIMARY KEY (`idAuditorija`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`PersonaNoslogojums`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`PersonaNoslogojums` (
  `idPersonaNoslogojums` INT NOT NULL AUTO_INCREMENT,
  `Persona_idPersona` INT NOT NULL,
  `pDatums` DATE NOT NULL,
  `pLaiksNo` TIME NOT NULL,
  `pLaiksLidz` TIME NOT NULL,
  PRIMARY KEY (`idPersonaNoslogojums`, `Persona_idPersona`),
  INDEX `fk_PersonaNoslogojums_Persona1_idx` (`Persona_idPersona` ASC),
  CONSTRAINT `fk_PersonaNoslogojums_Persona1`
    FOREIGN KEY (`Persona_idPersona`)
    REFERENCES `mydb`.`Persona` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`AuditorijaNoslogojums`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`AuditorijaNoslogojums` (
  `idAuditorijaNoslogojums` INT NOT NULL AUTO_INCREMENT,
  `Auditorija_idAuditorija` INT NOT NULL,
  `aDatums` DATE NOT NULL,
  `aLaiksNo` TIME NOT NULL,
  `aLaiksLidz` TIME NOT NULL,
  PRIMARY KEY (`idAuditorijaNoslogojums`, `Auditorija_idAuditorija`),
  INDEX `fk_AuditorijaNoslogojums_Auditorija1_idx` (`Auditorija_idAuditorija` ASC),
  CONSTRAINT `fk_AuditorijaNoslogojums_Auditorija1`
    FOREIGN KEY (`Auditorija_idAuditorija`)
    REFERENCES `mydb`.`Auditorija` (`idAuditorija`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`MacibuGrupa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`MacibuGrupa` (
  `idMacibuGrupa` INT NOT NULL AUTO_INCREMENT,
  `Kurss_idKurss` INT NOT NULL,
  `Auditorija_idAuditorija` INT NOT NULL,
  `mgDatumsNo` DATE NOT NULL,
  `mgDatumsLidz` DATE NOT NULL,
  PRIMARY KEY (`idMacibuGrupa`, `Kurss_idKurss`, `Auditorija_idAuditorija`),
  INDEX `fk_MacibuGrupa_Auditorija1_idx` (`Auditorija_idAuditorija` ASC),
  INDEX `fk_MacibuGrupa_Kurss1_idx` (`Kurss_idKurss` ASC),
  CONSTRAINT `fk_MacibuGrupa_Auditorija1`
    FOREIGN KEY (`Auditorija_idAuditorija`)
    REFERENCES `mydb`.`Auditorija` (`idAuditorija`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MacibuGrupa_Kurss1`
    FOREIGN KEY (`Kurss_idKurss`)
    REFERENCES `mydb`.`Kurss` (`idKurss`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`Persona_has_MacibuGrupa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`Persona_has_MacibuGrupa` (
  `Persona_idPersona` INT NOT NULL,
  `MacibuGrupa_idMacibuGrupa` INT NOT NULL,
  PRIMARY KEY (`Persona_idPersona`, `MacibuGrupa_idMacibuGrupa`),
  INDEX `fk_Persona_has_MacibuGrupa_MacibuGrupa1_idx` (`MacibuGrupa_idMacibuGrupa` ASC),
  INDEX `fk_Persona_has_MacibuGrupa_Persona1_idx` (`Persona_idPersona` ASC),
  CONSTRAINT `fk_Persona_has_MacibuGrupa_Persona1`
    FOREIGN KEY (`Persona_idPersona`)
    REFERENCES `mydb`.`Persona` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Persona_has_MacibuGrupa_MacibuGrupa1`
    FOREIGN KEY (`MacibuGrupa_idMacibuGrupa`)
    REFERENCES `mydb`.`MacibuGrupa` (`idMacibuGrupa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mcvs_db`.`Persona_has_Kurss`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mcvs_db`.`Persona_has_Kurss` (
  `Persona_idPersona` INT NOT NULL,
  `Kurss_idKurss` INT NOT NULL,
  PRIMARY KEY (`Persona_idPersona`, `Kurss_idKurss`),
  INDEX `fk_Persona_has_Kurss_Kurss1_idx` (`Kurss_idKurss` ASC),
  INDEX `fk_Persona_has_Kurss_Persona1_idx` (`Persona_idPersona` ASC),
  CONSTRAINT `fk_Persona_has_Kurss_Persona1`
    FOREIGN KEY (`Persona_idPersona`)
    REFERENCES `mydb`.`Persona` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Persona_has_Kurss_Kurss1`
    FOREIGN KEY (`Kurss_idKurss`)
    REFERENCES `mydb`.`Kurss` (`idKurss`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
